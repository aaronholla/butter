# Migration `20190901155940-require-movie-and-user-on-vote`

This migration has been generated by Aaron Holland at 9/1/2019, 3:59:40 PM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Vote" DROP COLUMN "movie",ADD COLUMN "movie" text   REFERENCES "public"."Movie"("id") ON DELETE SET NULL,DROP COLUMN "user",ADD COLUMN "user" text   REFERENCES "public"."User"("id") ON DELETE SET NULL;
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration 20190901130029-init..20190901155940-require-movie-and-user-on-vote
--- datamodel.dml
+++ datamodel.dml
@@ -21,8 +21,8 @@
 }
 model Vote {
   id    String  @default(cuid()) @id @unique
-  movie Movie?
+  movie Movie
   scene Boolean
-  user  User?
+  user  User
 }
```

## Photon Usage

You can use a specific Photon built for this migration (20190901155940-require-movie-and-user-on-vote)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20190901155940-require-movie-and-user-on-vote'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
